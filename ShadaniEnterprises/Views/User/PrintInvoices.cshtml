<!DOCTYPE html>
<html lang="en">
@model ShadaniEnterprises.Models.InvoiceBillsList
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- Tell the browser to be responsive to screen width -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Print Invoice</title>
    <link href="https://netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">

    <style>


        .invoice-title h2, .invoice-title h3 {
            display: inline-block;
        }

        .table > tbody > tr > .no-line {
            border-top: none;
        }

        .table > thead > tr > .no-line {
            border-bottom: none;
        }

        .table > tbody > tr > .thick-line {
            border-top: 2px solid;
        }

        .panel-footer {
            text-align: center;
            position: relative;
        }

            .panel-footer .right {
                position: absolute;
                right: 0;
                /* vertically center the icon */
                top: 50%;
                transform: translateY(-50%);
            }
            .panel-footer .left {
                position: absolute;
                left: 0;
                /* vertically center the icon */
                top: 50%;
                transform: translateY(-50%);
            }

            .panel-footer p {
                font-size: medium;
                padding: 0 20px; /* leave space for the icon adjust this value depending on how big your icon is */
            }
    </style>
</head>
<body style="overflow:hidden;">
    <div class="container">
        <div class="row">
            <br><br>
            @for (int x = 0; x < Model.LstInvoices.Count(); x++)

            {
                if (Model.LstInvoices[x].InvoiceType == "Private")
                {

                    <div style="width:900px; text-align:center; overflow:hidden">
                        <div style="width: 150px; border: 2px solid black; display:inline-block; vertical-align:middle; padding: 25px;">GST# 1703999931964</div>
                        <div style="width: 150px; border: 2px solid black; display:inline-block; vertical-align:middle; padding: 25px;">NTN# 3161164-8</div>
                        <div style="width: 165px; border: 2px solid black; display:inline-block; vertical-align:middle; padding: 25px;">CNIC # <br /> 45102-1418144-9</div>
                        <div style="width: auto; border: 2px solid black; display:inline-block; vertical-align:middle; padding: 6px;">Title: Shadani Enterprises<br />Acc # 0010026880790016<br />Allied Bank Limited (Branch Code 0396)<br />Gulistan-e-Jauhar Block-19, Karachi.</div>
                    </div><br />


                }
                else
                {
                    <div></div>
                }



                <div class="col-xs-12">
                    <div class="panel-footer">
                        <img src="../../img/2.png" alt='logo' class="left">
                        <p style="font-size:16px; font-weight:bold">SHADANI ENTERPRISES</p> <p style="font-size:12px; font-weight:bold"> R-96, Evacuee Society, Gulshan-e-Iqbal, Block 10-A, Karachi. <br /> Ph: 021-34156849  www.shadanienterprises.com</p>
                        <h2 class="right" style="font-size:20px; font-weight:bold">Invoice / Bills</h2>
                    </div><br />

                    <div class="invoice-title">
                        
                        <strong>Order Number: @Model.LstInvoices[x].CustOrderNum</strong>
                        <strong class="pull-right">Invoice No: @Model.LstInvoices[x].InvoiceNumber</strong>
                    </div>
                    <div class="invoice-title">
                        <strong id="OrderDateOrigFormat" hidden>@Model.LstInvoices[x].OrderDate</strong>
                        <strong id="OrderDateNewFormat"></strong>
                        
                        <strong class="pull-right" id="InvoiceDateOrigFormat" hidden>@Model.LstInvoices[x].InvoiceDate</strong>
                        <strong class="pull-right" id="InvoiceDateNewFormat"></strong>
                    </div>

                    <div class="invoice-title">
                        <strong>Customer Name: @Model.LstInvoices[x].CustomerName</strong>

                    </div>
                    <div class="invoice-title">
                        <strong>Address: @Model.LstInvoices[x].Address1</strong><br />
                        <strong>@Model.LstInvoices[x].Address2</strong>

                    </div>


                    @*<div class="row">
                        <div class="col-xs-12 text-center">

                            <h2>@Model.LstInvoices[x].CustomerName</h2><br>

                        </div>
                    </div>*@

                </div>
            }
        </div>

        <div class="row" style="margin-top:8px">
            <div class="col-md-12">
                <div class="panel panel-default">
                    @*<div class="panel-heading">
                        <h3 class="panel-title"><strong>Order summary</strong></h3>
                    </div>*@
                    <div class="panel-body">
                        <div>
                            <table class="table table-condensed" id="countit">
                                <thead>
                                    <tr>
                                        <th><strong style="font-size:12px; font-weight:bold">S.No</strong></th>
                                        <th><strong style="font-size:12px; font-weight:bold; white-space: nowrap;">Tender Code</strong></th>
                                        <th class="text-left"><strong style="font-size:12px; font-weight:bold">Prod Reg #</strong></th>
                                        <th><strong style="font-size:12px; font-weight:bold">Products</strong></th>
                                        <th><strong style="font-size:12px; font-weight:bold">Pack</strong></th>
                                        <th><strong style="font-size:12px; font-weight:bold">A/c Unit</strong></th>
                                        <th><strong style="font-size:12px; font-weight:bold">Qty</strong></th>
                                        <th><strong style="font-size:12px; font-weight:bold">Batch</strong></th>
                                        <th><strong style="font-size:12px; font-weight:bold">EXP</strong></th>
                                        <th><strong style="font-size:12px; font-weight:bold">Rate</strong></th>
                                        <th><strong style="font-size:12px; font-weight:bold">Amount</strong></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @for (int y = 0; y < Model.LstInvoicesDetails.Count(); y++)
                                    {
                                        int z = y + 1;
                                    <tr>
                                        <td style="font-size:12px; font-weight:bold;">@z.ToString()</td>
                                        <td style="font-size:12px; font-weight:bold; width:1px; white-space:nowrap">@Model.LstInvoicesDetails[y].TenderCode</td>
                                        <td class="text-left" style="font-size:12px; font-weight:bold">@Model.LstInvoicesDetails[y].ProdRegNum</td>
                                        <td style="font-size:12px; font-weight:bold; width:1px; white-space:nowrap">@Model.LstInvoicesDetails[y].ProductBrandName <br /> (@Model.LstInvoicesDetails[y].ProductGenericName)</td>
                                        <td style="font-size:12px; font-weight:bold">@Model.LstInvoicesDetails[y].Pack</td>
                                        <td style="font-size:12px; font-weight:bold">@Model.LstInvoicesDetails[y].AcUnit</td>
                                        <td style="font-size:12px; font-weight:bold">@Model.LstInvoicesDetails[y].PurchasesQty</td>
                                        <td style="font-size:12px; font-weight:bold">@Model.LstInvoicesDetails[y].Batch</td>

                                        <td style="font-size:12px; font-weight:bold">@Model.LstInvoicesDetails[y].EXP</td>
                                        <td style="font-size:12px; font-weight:bold">@Model.LstInvoicesDetails[y].PurchaseRate</td>
                                        <td class="count-me" style="font-size:12px; font-weight:bold">@Model.LstInvoicesDetails[y].Amout</td>
                                    </tr>

                                    }
                                    <tr>
                                        <td class="thick-line"></td>
                                        <td class="thick-line"></td>
                                        <td class="thick-line"></td>
                                        <td class="thick-line"></td>
                                        <td class="thick-line"></td>
                                        <td class="thick-line"></td>
                                        <td class="thick-line"></td>
                                        <td class="thick-line"></td>
                                        <td class="thick-line"></td>
                                        <td class="thick-line"><strong style="font-size:12px; font-weight:bold; padding-right:10px">Total</strong></td>
                                        <td class="thick-line"><span id="grandTotal" style="font-size:12px; font-weight:bold; padding-right:7px"></span></td>
                                    </tr>
                                @for (int x = 0; x < Model.LstInvoices.Count(); x++)

                                {
                                    <tr>
                                        <td class="no-line"></td>
                                        <td class="no-line"></td>
                                        <td class="no-line"></td>
                                        <td class="no-line"></td>
                                        <td class="no-line"></td>
                                        <td class="no-line"></td>
                                        <td class="no-line"></td>
                                        <td class="no-line"></td>
       
                                        <td class="no-line"><strong id="getAdvTax" hidden>@Model.LstInvoices[x].AdvTax</strong></td>
                                        <td class="no-line"><strong style="font-size:12px; font-weight:bold; padding-right:10px">@Model.LstInvoices[x].AdvTax % Advance Tax</strong></td>
                                        <td class="no-line"><span id="advTax" style="font-size:12px; font-weight:bold; padding-right:7px"></span></td>
                                    </tr>
                                    }
                                    <tr>
                                        <td class="no-line"></td>
                                        <td class="no-line"></td>
                                        <td class="no-line"></td>
                                        <td class="no-line"></td>
                                        <td class="no-line"></td>
                                        <td class="no-line"></td>
                                        <td class="no-line"></td>
                                        <td class="no-line"></td>
                                        <td class="no-line"></td>
                                        <td class="no-line"><strong style="font-size:12px; font-weight:bold; padding-right:10px">Invoice Value</strong></td>
                                        <td class="no-line"><span id="netTotal" style="font-size:12px; font-weight:bold; padding-right:7px"></span></td>
                                    </tr>

                                </tbody>
                            </table>
                            @*<div style="text-align: center;">
                                <span id="inWords" style="align-self:center"></span>
                            </div>*@
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div>
            <span id="inWords"></span>
        </div>
        <br>
        <br>
        <div class="row">
            <div class="col-xs-6 text-left">
                <address>
                    <strong>__________________________</strong><br>

                    <strong>For: SHADANI ENTERPRISES</strong>
                </address>
            </div>
            <div class="col-xs-6 text-right">
                <address>
                    <strong>_________________________</strong><br>

                    <strong>Receiver Signed & Stamped</strong>
                </address>
            </div>

        </div>
        @for (int x = 0; x < Model.LstInvoices.Count(); x++)

        {
            if (Model.LstInvoices[x].Warranty == "Yes")
            {

                <div class="row">
                    <div class="col-xs-12">
                        <div style="width: 900px; border: 2px solid black; padding: 25px; margin: auto">I Jai Parkash being a person resident in Pakistan caryying on business at under the name Shadani Enterprises, do here by give this warranty that the drugs described as sold in the invoice do not contrivance in any way the provision of section 23 of the Drugs Act 1976.<br /><br />* Expired products shall not be taken back unless written intimation is given six (06) months before the expiry date. <br />* Please check for batch no. leaking, breaking, shortage, & discount before the goods have been delivered</div>

                    </div>
                </div>

            }

            else
            {
                <div class="row">
                    <div class="col-xs-12">
                        <div style="width: 900px; margin:auto">&nbsp;</div>

                    </div>
                </div>
            }


        }


    </div>


        <script src="https://netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js"></script>
        <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
        <script language="javascript" type="text/javascript">

            $(document).ready(function () {

                var dateOrigOrder = document.getElementById('OrderDateOrigFormat').innerHTML
                var dateOrigInvoice = document.getElementById('InvoiceDateOrigFormat').innerHTML
                var myDate = new Date(dateOrigOrder)
                var date = myDate.getDate();
                var month = myDate.getMonth() + 1;
                var year = myDate.getFullYear();
                var myDateInvoice = new Date(dateOrigInvoice)
                var dateInv = myDateInvoice.getDate();
                var monthInv = myDateInvoice.getMonth() + 1;
                var yearInv = myDateInvoice.getFullYear();
                document.getElementById('OrderDateNewFormat').innerHTML = 'Order Date: ' + date + '/' + month + '/' + year
                document.getElementById('InvoiceDateNewFormat').innerHTML = 'Invoice Date: ' + dateInv + '/' + monthInv + '/' + yearInv

            });

            var tds = document.getElementById('countit').getElementsByTagName('td');
            var totalInvoice = 0;
            for (var i = 0; i < tds.length; i++) {
                if (tds[i].className == 'count-me') {
                    totalInvoice += isNaN(tds[i].innerHTML) ? 0 : parseFloat(tds[i].innerHTML);
                }
            }

            parseInt(document.getElementById('grandTotal').innerHTML += 'PKR ' + totalInvoice.toLocaleString());
            var advTax = document.getElementById('getAdvTax').innerHTML

            var perce = parseInt(100);
            var advTaxCalc = totalInvoice * advTax / perce;
            parseInt(document.getElementById('advTax').innerHTML += 'PKR ' + advTaxCalc.toLocaleString());

            var netReceivable = totalInvoice + advTaxCalc;
            parseInt(document.getElementById('netTotal').innerHTML += 'PKR ' + netReceivable.toLocaleString());

            var newSum = netReceivable



            function numberToEnglish(newSum) {

                var words = new Array();
                words[0] = 'Zero'; words[1] = 'One'; words[2] = 'Two'; words[3] = 'Three'; words[4] = 'Four'; words[5] = 'Five'; words[6] = 'Six'; words[7] = 'Seven'; words[8] = 'Eight'; words[9] = 'Nine'; words[10] = 'Ten'; words[11] = 'Eleven'; words[12] = 'Twelve'; words[13] = 'Thirteen'; words[14] = 'Fourteen'; words[15] = 'Fifteen'; words[16] = 'Sixteen'; words[17] = 'Seventeen'; words[18] = 'Eighteen'; words[19] = 'Nineteen'; words[20] = 'Twenty'; words[30] = 'Thirty'; words[40] = 'Forty'; words[50] = 'Fifty'; words[60] = 'Sixty'; words[70] = 'Seventy'; words[80] = 'Eighty'; words[90] = 'Ninety'; var op;
                newSum = newSum.toString();
                var atemp = newSum.split('.');
                var number = atemp[0].split(',').join('');
                var n_length = number.length;
                var words_string = '';
                if (n_length <= 9) {
                    var n_array = new Array(0, 0, 0, 0, 0, 0, 0, 0, 0);
                    var received_n_array = new Array();
                    for (var i = 0; i < n_length; i++) {
                        received_n_array[i] = number.substr(i, 1);
                    }
                    for (var i = 9 - n_length, j = 0; i < 9; i++ , j++) {
                        n_array[i] = received_n_array[j];
                    }
                    for (var i = 0, j = 1; i < 9; i++ , j++) {
                        if (i == 0 || i == 2 || i == 4 || i == 7) {
                            if (n_array[i] == 1) {
                                n_array[j] = 10 + parseInt(n_array[j]);
                                n_array[i] = 0;
                            }
                        }
                    }
                    value = '';
                    for (var i = 0; i < 9; i++) {
                        if (i == 0 || i == 2 || i == 4 || i == 7) {
                            value = n_array[i] * 10;
                        } else {
                            value = n_array[i];
                        }
                        if (value != 0) {
                            words_string += words[value] + ' ';
                        }
                        if ((i == 1 && value != 0) || (i == 0 && value != 0 && n_array[i + 1] == 0)) {
                            words_string += 'Crores ';
                        }
                        if ((i == 3 && value != 0) || (i == 2 && value != 0 && n_array[i + 1] == 0)) {
                            words_string += 'Lakhs ';
                        }
                        if ((i == 5 && value != 0) || (i == 4 && value != 0 && n_array[i + 1] == 0)) {
                            words_string += 'Thousand ';
                        }
                        if (i == 6 && value != 0 && (n_array[i + 1] != 0 && n_array[i + 2] != 0)) {
                            words_string += 'Hundred and ';
                        } else if (i == 6 && value != 0) {
                            words_string += 'Hundred ';
                        }
                    }
                    words_string = words_string.split(' ').join(' ');
                }
                return words_string;
            }
            function RsPaise(n) {
                nums = n.toString().split('.')
                var whole = numberToEnglish(nums[0])
                if (nums[1] == null) nums[1] = 0;
                if (nums[1].length == 1) nums[1] = nums[1] + '0';
                if (nums[1].length > 2) { nums[1] = nums[1].substring(2, length - 1) }
                if (nums.length == 2) {
                    if (nums[0] <= 9) { nums[0] = nums[0] * 10 } else { nums[0] = nums[0] };
                    var fraction = numberToEnglish(nums[1])

                    if (whole == '' && fraction == '') { op = 'Zero only'; }
                    if (whole == '' && fraction != '') { op = fraction + ' paisa ' + ' only'; }
                    if (whole != '' && fraction == '') { op = 'Rupees ' + whole + ' only'; }
                    if (whole != '' && fraction != '') { op = 'Rupees ' + whole + 'and ' + fraction + ' paisa' + ' only'; }
                    amt = newSum
                    if (amt > 999999999.99) { op = 'Oops!!! The amount is too big to convert'; }
                    if (isNaN(amt) == true) { op = 'Error : Amount in number appears to be incorrect. Please Check.'; }
                    document.getElementById('inWords').innerHTML = 'Amount in words: ' + op;
                }
            }
            RsPaise(Math.round(newSum * 100) / 100);
        </script>
</body>
</html>
